# ゲーム画面遷移仕様

## 画面一覧

| ID | 画面名 | 説明 |
|---|---|---|
| **ラン外（00〜09）** |
| S00_BOOT | 起動 | 起動直後。初期化・リソースロード |
| S01_TITLE | タイトル | タイトル画面 |
| S02_TITLE_OPTION | オプション（タイトル） | タイトル用オプション設定 |
| S03_SAVE_SELECT | セーブ選択 | セーブスロット選択・新規作成・削除 |
| **ラン前（10〜19）** |
| S10_HUB | 拠点 | ラン準備（キャラ選択・周回強化など） |
| **ラン中（20〜69）** |
| S20_AREA_PROGRESS | エリア進行 | ステージ間の進行画面 |
| S21_EVENT | イベント | テキスト＋選択肢＋結果 |
| S22_MINIGAME | ミニゲーム | 特殊報酬獲得ミニゲーム |
| S23_SHOP | 商店 | 購入/削除/レリック/アイテム |
| S24_SHRINE | 祠 | 持ち越しカードの選択・固定/スキップ |
| S30_BATTLE | 戦闘 | 戦闘メイン（5フェーズ制） |
| S31_BATTLE_REWARD | 戦闘報酬 | ゴールド/ソウル/カード報酬 |
| **ラン後（70〜79）** |
| S70_GAMEOVER_DEATH | 敗北演出 | 死因/最後の敵など |
| S71_RUN_RESULT | ラン結果 | 獲得ソウル、周回強化反映 |
| S72_RUN_CLEAR | クリア演出（任意） | ボス撃破/エンディング演出 |
| **共通（80〜99）** |
| S80_TUTORIAL | チュートリアル | 初回チュートリアル |
| S91_HELP | 操作説明 | 操作説明・用語 |
| S92_CODEX | 図鑑（任意） | 図鑑/ログ（敵・カード・死亡ログ等） |

ポーズはmodal

---

## 【ラン外（00〜09）】

### S00_BOOT
**起動直後**

- **内容**: 初期化・リソースロード
- **遷移**: 完了後 → S01_TITLE

### S01_TITLE
**タイトル画面**

- **内容**: 「はじめる」「つづきから」「オプション」

#### 遷移
- はじめる → S10_HUB（新規ラン用セーブスロットを自動使用）
- つづきから → S03_SAVE_SELECT
- オプション → S02_TITLE_OPTION

### S02_TITLE_OPTION
**タイトル用オプション**

- **内容**: 音量/表示/キー設定等

#### 遷移
- 戻る → S01_TITLE

### S03_SAVE_SELECT
**セーブスロット選択**

- **内容**: セーブスロット選択・新規作成・削除

#### 遷移
- スロット選択 → S10_HUB
- 戻る → S01_TITLE

---

## 【ラン前（10〜19）】

### S10_HUB
**拠点（ラン準備）**

#### 内部サブモード（画面遷移なし）
- キャラ選択
- 扉（ステージ）選択
- 周回強化
- 祠管理
- 出撃

#### 遷移
- 出撃 → S20_AREA_PROGRESS
- セーブ選択に戻る → S03_SAVE_SELECT

---

## 【ラン中（20〜69）】

### S20_AREA_PROGRESS
**エリア進行（背景＋次へ進む）**

#### UI
- 背景
- 次へ進む / 分岐ボタン
- エリア残り数
- エリア名 / 危険度

#### 内部抽選結果による遷移
- イベント → S21_EVENT
- ミニゲーム → S22_MINIGAME
- 商店 → S23_SHOP
- 祠 → S24_SHRINE
- 戦闘 → S30_BATTLE
- エリア終了（ボス前など）→ S30_BATTLE

### S21_EVENT
**イベント**

- **内容**: テキスト＋選択肢＋結果

#### 遷移
- 結果確定 → S20_AREA_PROGRESS

### S22_MINIGAME
**ミニゲーム**

- **内容**: 特殊報酬獲得ミニゲーム

#### 遷移
- 結果確定 → S20_AREA_PROGRESS

### S23_SHOP
**商店**

- **内容**: 購入/削除/レリック/アイテム

#### 遷移
- 退店 → S20_AREA_PROGRESS

### S24_SHRINE
**祠**

- **内容**: 持ち越しカードの選択・固定/スキップ

#### 遷移
- 決定 / スキップ → S20_AREA_PROGRESS

### S30_BATTLE
**戦闘メイン**

#### 内部フェーズ
- Read / Plan / Distortion / Execute / Cleanup

#### 遷移
- 勝利 → S31_BATTLE_REWARD
- 敗北 → S70_GAMEOVER_DEATH

### S31_BATTLE_REWARD
**戦闘報酬**

- **内容**: ゴールド/ソウル/カード報酬

#### 遷移
- 確定 → S20_AREA_PROGRESS

#### 予約枠（S32〜S39）
将来拡張用：休息、強化、エリート演出など

---

## 【ラン後（70〜79）】

### S70_GAMEOVER_DEATH
**敗北演出**

- **内容**: 死因/最後の敵など

#### 遷移
- 続ける → S71_RUN_RESULT

### S71_RUN_RESULT
**ラン結果**

- **内容**: 獲得ソウル、アンロック、周回強化反映

#### 遷移
- 拠点へ戻る → S10_HUB

### S72_RUN_CLEAR（任意）
**クリア演出**

- **内容**: ボス撃破/エンディング演出

#### 遷移
- 終了 → S71_RUN_RESULT

---

## 【共通（80〜99）】

### S80_TUTORIAL
**チュートリアル**

- **内容**: 初回チュートリアル

#### 呼び出し元
- S30_BATTLE（初回のみ）
- S20_AREA_PROGRESS（初回のみ）

#### 遷移
- 閉じる → 呼び出し元へ戻る


#### 遷移
- 再開 → 呼び出し元
- 操作説明 → S91_HELP
- 終了（ラン放棄） → S70_GAMEOVER_DEATH

### S91_HELP
**操作説明・用語**


### S92_CODEX（任意）
**図鑑/ログ**

- **内容**: 敵・カード・死亡ログ等

#### 呼び出し元
- S10_HUB

#### 遷移
- 戻る → 呼び出し元